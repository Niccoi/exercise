<!DOCTYPE html>
<html>

  <head>
      <link rel="stylesheet" href="style.css">
      <link href="https://fonts.googleapis.com/css?family=Hind:400,500,600&amp;subset=latin-ext" rel="stylesheet">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  </head>
<body>


  <main class="app">
    <div class="add">
      <input placeholder="+ Add todo item" type="text" class="add__input" id="todo">
      <button onclick="myFunction()" id="addTodo">Add to List</button>
    </div>

    <ul class="list" id="list">
      
    </ul>
  </main>


  <script>
  var listArray =  new Array();
  var listItems = "";

  var input = document.getElementById("todo");

input.addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
        event.preventDefault();
        document.getElementById("addTodo").click();
    }
});

    function myFunction(){
      var newlist = document.getElementById("todo").value;
      if(newlist=="" || null){
        alert("Invalid input!");
      }
      else{
      var newlist = document.getElementById("todo").value;
      listArray.push(newlist);
      listItems = "";
      
      for(var i=0; i<listArray.length; i++){
        var currentTodo = listArray[i];

        listItems += `
        <li class="item" id="${listArray[i]}">
            <label onclick="strike_todo('${i}')" class="item__checkbox item__checkbox--3">
              <input type="checkbox"><i class="fas fa-check"></i>
            </label>
            <span onclick="edit_todo('${listArray[i]}')">${listArray[i]}</span>
            <button onclick="delete_todo('${listArray[i]}')" class="item__delete"><i class="fas fa-trash-alt"></i></button>
        </li>
        `
      }
      document.getElementById("list").innerHTML = listItems;
      console.log(listArray);
      document.getElementById("todo").value ="";
     
    }
    }
 
    Array.prototype.deleteElem = function(val) {
    var index = this.indexOf(val); 
    if (index >= 0) this.splice(index, 1);
    return this;
};

   function delete_todo(selected_todo) {
     
    var arr2 = listArray.deleteElem(selected_todo);
    console.log(arr2);
    listItems = "";
      for(var i=0; i<listArray.length; i++){
      
        listItems += `
        <li class="item" id="${listArray[i]}">
            <label onclick="strike_todo('${i}')" class="item__checkbox item__checkbox--3">
              <input type="checkbox"><i class="fas fa-check"></i>
            </label>
            <span onclick="edit_todo('${listArray[i]}')">${listArray[i]}</span>
            <button onclick="delete_todo('${listArray[i]}')" class="item__delete"><i class="fas fa-trash-alt"></i></button>
        </li>
        `
      }

      document.getElementById("list").innerHTML = listItems;
      }

      
    function strike_todo(selected_todo){
      var selectedItem = listArray[selected_todo];
      var x = document.getElementById(selectedItem).style.textDecoration = "line-through";
      console.log(x);

    }


    function edit_todo(toUpdateTodo){
      listItems = "";
          var updateInput = prompt("Enter updated todo", "");
          const index = listArray.indexOf(toUpdateTodo);
          listArray[index] = updateInput;
          console.log(updateInput);

          for(var i=0; i<listArray.length; i++){
          
            listItems += `
            <li class="item" id="${listArray[i]}">
                <label onclick="strike_todo('${i}')" class="item__checkbox item__checkbox--3">
                  <input type="checkbox"><i class="fas fa-check"></i>
                </label>
                <span onclick="edit_todo('${listArray[i]}')">${listArray[i]}</span>
                <button onclick="delete_todo('${listArray[i]}')" class="item__delete"><i class="fas fa-trash-alt"></i></button>
            </li>
            `
          }

        document.getElementById("list").innerHTML = listItems;
        console.log(listArray)
    }


  </script>
  
 

</body>
</html>
